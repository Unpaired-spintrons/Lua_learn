# 表达式

## 算数运算符

这些运算操作都是实数

### 二元运算符

```lua
+ --加法
- --减法
* --乘法
/ --除法
^ --指数
% --取余
```

### 一元运算符

```lua
- --负数
```

## 关系运算符

```lua
<  --小于
>  --大于
<= --小于等于
>= --大于等于
== --全等于比较
~= --不等于比较
```

#### ==与~=

在Lua中的定义是十分独特的，(当变量赋予的值是table表，userdata和function时，是数字或字符串时操作和其他语言相同)

== 仅是自己和自己比才会是true，其余都是false

~= 数值相同并不是等于，也是不等于

例子：

```lua
a = {}; a.x = 1; a.y = 0;
b = {}; b.x = 1; b.y = 0; --主.副就是C结构体中的表述方法表明主变量中的从属的值
c = a;
a == c;                   --自己和自己比才是true
a ~= b;                   --不相等
```

#### 混淆比较

在字符串和数字混淆比较时报错

```lua
"2" < "15" --false
```

## 逻辑运算符

```lua
and --与
or  --或
not --非
```

**$\color{FF0000}注意：0在Lua中表示的仍是真，只有nil和false才会表示为假$**

#### and

输出的值

* 有nil或false输出nil或false
* 没有则输出后项

#### or

输出的值

* 前项

#### not

输出的值

* nil，false输出ture
* 其他值输出false

### 三元运算符操作

C语言中操作

```c
a ? b : c
```

Lua操作

```lua
(a and b) or c
```

## 连接运算符

连接两个字符串的运算符

```lua
..
```

示例：

```lua
print("hello" .. "world")  -->helloworld
```

## 优先级

从高到低

| 优先级 | 成员           |         |    |    |    |    |
| ------ | -------------- | ------- | -- | -- | -- | -- |
| 1      | ^              |         |    |    |    |    |
| 2      | not            | -(负号) |    |    |    |    |
| 3      | *              | /       |    |    |    |    |
| 4      | +              | -       |    |    |    |    |
| 5      | ..(连接运算符) |         |    |    |    |    |
| 6      | <              | >       | <= | >= | ~= | == |
| 7      | and            |         |    |    |    |    |
| 8      | or             |         |    |    |    |    |

## 表的构造

 采用{}就可以进行最简单的表的构造

##### 空表

```lua
local biao = {}
```

##### 直接带参数(列表风格)

```lua
local biao_zd = {"hello",nil,1,true,print,sin(1)}
```

可以采用 表名[索引号] 来调用表内的数据

**Tips:**

$$
\color{FFFF01}Lua中的索引是从1开始
$$

##### 带代指的表(record风格)

```lua
--one style
local w = {x = 0,y = 2}
--another style
local w{}; w.x = 0; w.y =2;
```

此时，索引还未赋值 *$\color{orange}w[1] = nil$*

要访问x则是 $\color{orange}w.x$

### 表的嵌套

table是可以相互嵌套的

```lua
local a = {0,3,4}
local b = {a,3} 
```

#### 构造特性

每一次我们使用{}都会构造一个新的表，因此我们可以套娃

```lua

```

两种风格在构造时可以互相嵌套

### 自定义索引

#### 自定义索引号

另外，我们可以定义索引，这十分的酷

```lua
local cool = {["+"] = "hello",[-1]="sss"}  --定义
print(cool["+"])                           --输出hello(调用时一定要加双引号)
print(cool[-1])                            --输出hhh(可以调用负数作为索引了，哈哈哈)
local s = "+"
print(cool[s])                             --输出hello
```

#### 自定义开头

```lua
local kaitou = {[0] = 1,"haoo",20}   --这样就是从0开始索引了
```

**Tips**

* 不建议使用0作为索引开始，这会使得很多标准库无法使用

#### 分隔

```lua
local mo = {1,2,3,}    --添加一个逗号方便之后扩展
```

逗号可用分号替代，这样可以方便的划分table中不同类型的数据

```lua
--, style
local mo = {1,2,3,}
--; style
local mo = {1;2;3;}

local diff = {1,2,3;"hello","now"} --区分不同的域
```
